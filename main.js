!function(){"use strict";var t=JSON.parse('{"hW":[{"name":"Afghanistan","latitude":33.93911,"longitude":67.709953,"random_position":6,"optimized_position":0},{"name":"Antarctica","latitude":-75.250973,"longitude":-0.071389,"random_position":2,"optimized_position":3},{"name":"Australia","latitude":-25.274398,"longitude":133.775136,"random_position":7,"optimized_position":2},{"name":"Bolivia","latitude":-16.290154,"longitude":-63.588653,"random_position":0,"optimized_position":4},{"name":"Central African Republic","latitude":6.611111,"longitude":20.939444,"random_position":3,"optimized_position":8},{"name":"France","latitude":46.227638,"longitude":2.213749,"random_position":8,"optimized_position":7},{"name":"Greenland","latitude":71.706936,"longitude":-42.604303,"random_position":5,"optimized_position":6},{"name":"Russia","latitude":61.52401,"longitude":105.318756,"random_position":1,"optimized_position":1},{"name":"United States","latitude":37.09024,"longitude":-95.712891,"random_position":4,"optimized_position":5}]}');const e=L.map("map").setView([51.505,-.09],2),i=[];L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);const o=L.icon({iconUrl:"a29e914295e0187548c7.png",iconSize:[35,48],iconAnchor:[10,20],popupAnchor:[5,-20]});t.hW.forEach((t=>{L.marker([t.latitude,t.longitude],{icon:o}).addTo(e).bindPopup(t.name).openPopup(),i.push([t.latitude,t.longitude,t.optimized_position])}));const n=i.sort(((t,e)=>t[2]-e[2])),s=(L.polyline(n).addTo(e),document.forms.form),r=document.querySelector(".popup-confirm"),a=[];new class{constructor(t,e){this._options=t,this._form=e}_hasInvalidInput(t){return t.some((t=>!t.validity.valid))}_showInputError(t){const e=this._form.querySelector(`.${t.id}-error`);t.classList.add(this._options.inputErrorClass),e.classList.add(this._options.errorClass),e.textContent=t.validationMessage}_hideInputError(t){const e=this._form.querySelector(`.${t.id}-error`);t.classList.remove(this._options.inputErrorClass),e.classList.remove(this._options.errorClass),e.textContent=""}_checkInputValidity(t){t.validity.valid?this._hideInputError(t,this._options):this._showInputError(t,this._options)}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._options.inputSelector)),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t)}))}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners(this._form,this._options)}}({formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},s).enableValidation();const p=new class{constructor(t){this._popup=t,this._button=this._popup.querySelector(".popup__btn")}open(){this._popup.classList.add("popup_opened"),this.setEventListeners()}close=()=>{this._popup.classList.remove("popup_opened"),this.removeEventListeners()};setEventListeners(){this._button.addEventListener("click",this.close),document.addEventListener("mousedown",this._handleOverlayClick),document.addEventListener("keydown",this._handleEscKeydown)}removeEventListeners(){this._closeButton.removeEventListener("click",this.close),document.removeEventListener("mousedown",this._handleOverlayClick),document.removeEventListener("keydown",this._handleEscKeydown)}_handleOverlayClick=t=>{t.target.classList.contains("popup_opened")&&this.close()};_handleEscKeydown=t=>{"Escape"===t.key&&this.close()}}(r),d=new class{constructor(t,e){this._form=t,this._handleSubmit=e,this._formInputs=this._form.querySelectorAll(".form__input")}_getInputValues(){const t={};return this._formInputs.forEach((e=>{t[e.name]=e.value})),t}setInputValues(t){this._formInputs.forEach((e=>{e.value=t[e.name]}))}setEventListeners(){this._form.addEventListener("submit",this._handleSubmitForm)}_handleSubmitForm=t=>{this._handleSubmit(this._getInputValues()),t.preventDefault()};reset(){this._form.reset()}}(s,(()=>{p.open(),a.push(d._getInputValues()),d.reset()}));d.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eUIsS0FBQUEsR0FDRXhELEtBQUtFLE1BQU1zRCxPQUNiLEdIaUIwQmpFLEdBQU0sS0FDaEMyQyxFQUFhRyxPQUNieEMsRUFBWVosS0FBSytELEVBQVdJLG1CQUM1QkosRUFBV1EsT0FBTyxJQUdwQlIsRUFBV1YsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qaW5nbGUtYmVsbHMtamFtL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2ppbmdsZS1iZWxscy1qYW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamluZ2xlLWJlbGxzLWphbS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vamluZ2xlLWJlbGxzLWphbS8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9qaW5nbGUtYmVsbHMtamFtLy4vc3JjL2NvbXBvbmVudHMvRm9ybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHNhbnRhIGZyb20gXCIuLi9pbWFnZXMvc2FudGEucG5nXCI7XHJcbmltcG9ydCBkYXRhIGZyb20gXCIuLi9zY3JpcHRzL2RhdGEuanNvblwiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qc1wiO1xyXG5cclxuY29uc3QgbWFwID0gTC5tYXAoXCJtYXBcIikuc2V0VmlldyhbNTEuNTA1LCAtMC4wOV0sIDIpO1xyXG5jb25zdCBwYXRoID0gW107XHJcblxyXG5MLnRpbGVMYXllcihcImh0dHBzOi8vdGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmdcIiwge1xyXG4gIGF0dHJpYnV0aW9uOlxyXG4gICAgJyZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzJyxcclxufSkuYWRkVG8obWFwKTtcclxuXHJcbmNvbnN0IHNhbnRhSWNvbiA9IEwuaWNvbih7XHJcbiAgaWNvblVybDogc2FudGEsXHJcbiAgaWNvblNpemU6IFszNSwgNDhdLFxyXG4gIGljb25BbmNob3I6IFsxMCwgMjBdLFxyXG4gIHBvcHVwQW5jaG9yOiBbNSwgLTIwXSxcclxufSk7XHJcblxyXG5kYXRhLmNvdW50cmllcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgTC5tYXJrZXIoW2l0ZW0ubGF0aXR1ZGUsIGl0ZW0ubG9uZ2l0dWRlXSwgeyBpY29uOiBzYW50YUljb24gfSlcclxuICAgIC5hZGRUbyhtYXApXHJcbiAgICAuYmluZFBvcHVwKGl0ZW0ubmFtZSlcclxuICAgIC5vcGVuUG9wdXAoKTtcclxuICBwYXRoLnB1c2goW2l0ZW0ubGF0aXR1ZGUsIGl0ZW0ubG9uZ2l0dWRlLCBpdGVtLm9wdGltaXplZF9wb3NpdGlvbl0pO1xyXG59KTtcclxuXHJcbmNvbnN0IG9wdGltYWxQYXRoID0gcGF0aC5zb3J0KChhLCBiKSA9PiBhWzJdIC0gYlsyXSk7XHJcbmNvbnN0IHBvbHlsaW5lID0gTC5wb2x5bGluZShvcHRpbWFsUGF0aCkuYWRkVG8obWFwKTtcclxuXHJcbmNvbnN0IGZvcm0gPSBkb2N1bWVudC5mb3Jtcy5mb3JtO1xyXG5jb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtY29uZmlybVwiKTtcclxuY29uc3QgZGF0YUxldHRlcnMgPSBbXTtcclxuXHJcbmNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKG9wdGlvbnMsIGZvcm0pO1xyXG5mb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHBvcHVwQ29uZmlybSA9IG5ldyBQb3B1cChwb3B1cCk7XHJcblxyXG5jb25zdCBmb3JtTGV0dGVyID0gbmV3IEZvcm0oZm9ybSwgKCkgPT4ge1xyXG4gIHBvcHVwQ29uZmlybS5vcGVuKCk7XHJcbiAgZGF0YUxldHRlcnMucHVzaChmb3JtTGV0dGVyLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICBmb3JtTGV0dGVyLnJlc2V0KCk7XHJcbn0pO1xyXG5cclxuZm9ybUxldHRlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wdGlvbnMuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wdGlvbnMuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29wdGlvbnMuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29wdGlvbnMuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgdGhpcy5fb3B0aW9ucyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIHRoaXMuX29wdGlvbnMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX29wdGlvbnMuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnModGhpcy5fZm9ybSwgdGhpcy5fb3B0aW9ucyk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cDtcclxuICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J0blwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG5cclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbGljayk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NLZXlkb3duKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2spO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjS2V5ZG93bik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlT3ZlcmxheUNsaWNrID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlbmVkXCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFuZGxlRXNjS2V5ZG93biA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm0ge1xyXG4gIGNvbnN0cnVjdG9yKGZvcm0sIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IHt9O1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGRhdGFbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBpdGVtLnZhbHVlID0gZGF0YVtpdGVtLm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTdWJtaXRGb3JtID0gKGV2dCkgPT4ge1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfTtcclxuXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJtYXAiLCJMIiwic2V0VmlldyIsInBhdGgiLCJ0aWxlTGF5ZXIiLCJhdHRyaWJ1dGlvbiIsImFkZFRvIiwic2FudGFJY29uIiwiaWNvbiIsImljb25VcmwiLCJpY29uU2l6ZSIsImljb25BbmNob3IiLCJwb3B1cEFuY2hvciIsImRhdGEiLCJpdGVtIiwibWFya2VyIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJiaW5kUG9wdXAiLCJuYW1lIiwib3BlblBvcHVwIiwicHVzaCIsIm9wdGltaXplZF9wb3NpdGlvbiIsIm9wdGltYWxQYXRoIiwic29ydCIsImEiLCJiIiwiZm9ybSIsInBvbHlsaW5lIiwiZG9jdW1lbnQiLCJmb3JtcyIsInBvcHVwIiwicXVlcnlTZWxlY3RvciIsImRhdGFMZXR0ZXJzIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwidGhpcyIsIl9vcHRpb25zIiwiX2Zvcm0iLCJfaGFzSW52YWxpZElucHV0IiwiaW5wdXRMaXN0Iiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiZm9ybVNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJwb3B1cENvbmZpcm0iLCJfcG9wdXAiLCJfYnV0dG9uIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsIl9oYW5kbGVPdmVybGF5Q2xpY2siLCJfaGFuZGxlRXNjS2V5ZG93biIsIl9jbG9zZUJ1dHRvbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjb250YWlucyIsImtleSIsImZvcm1MZXR0ZXIiLCJoYW5kbGVTdWJtaXQiLCJfaGFuZGxlU3VibWl0IiwiX2Zvcm1JbnB1dHMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiX2hhbmRsZVN1Ym1pdEZvcm0iLCJyZXNldCJdLCJzb3VyY2VSb290IjoiIn0=